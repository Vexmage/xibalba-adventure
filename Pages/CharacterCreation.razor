@page "/character-creation"
@using XibalbaAdventure.Models

<h3>Create Your Character</h3>

<label>Name: </label>
<input @bind="character.Name" placeholder="Enter character name" />

<h4>Roll Stats:</h4>
<button @onclick="RollStats">Roll Stats</button>
<ul>
    <li>Kinetic: @character.Kinetic</li>
    <li>Concentration: @character.Concentration</li>
    <li>Stoic: @character.Stoic</li>
    <li>Social: @character.Social</li>
    <li>Perception: @character.Perception</li>
</ul>

<h4>Select Race:</h4>
<select @bind="selectedRaceName">
    <option value="">Select Race</option>
    @foreach (var race in races)
    {
        <option value="@race.Name">@race.Name (@race.Description)</option>
    }
</select>

<h4>Select Class:</h4>
<select @bind="selectedClassName">
    <option value="">Select Class</option>
    @foreach (var characterClass in classes)
    {
        <option value="@characterClass.Name">@characterClass.Name (@characterClass.Description)</option>
    }
</select>

<button @onclick="SaveCharacter">Save Character</button>

@code {
    private Character character = new Character(); // Create a new character
    private string selectedRaceName;
    private string selectedClassName;

    // Dummy data for races and classes
    private List<Race> races = new List<Race> { new Pentarexian(), new Narpaca() };
    private List<CharacterClass> classes = new List<CharacterClass> { new Arquebusier(), new Shocktrooper() };

    private void RollStats()
    {
        Random random = new Random();
        character.Kinetic = random.Next(3, 18);
        character.Concentration = random.Next(3, 18);
        character.Stoic = random.Next(3, 18);
        character.Social = random.Next(3, 18);
        character.Perception = random.Next(3, 18);
    }

    private void SaveCharacter()
    {
        character.Race = races.FirstOrDefault(r => r.Name == selectedRaceName);
        character.CharacterClass = classes.FirstOrDefault(c => c.Name == selectedClassName);

        if (character.Race != null && character.CharacterClass != null)
        {
            Console.WriteLine($"Character {character.Name} with race {character.Race.Name} and class {character.CharacterClass.Name} saved!");
        }
        else
        {
            Console.WriteLine("Please select a valid race and class for the character.");
        }
    }
}
